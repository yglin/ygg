<div class="tour-plan" *ngIf="tourPlan">
  <div class="the-thing">
    <the-thing [id]="tourPlan.id" [imitation]="imitation">
      <div the-thing-projection-middle>
        <div
          class="purchases"
          *ngIf="purchaseRelations && purchaseRelations.length > 0"
        >
          <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
            <h2>預訂項目</h2>
            <div *ngIf="!readonly">
              <button
                class="clear-purchases"
                mat-mini-fab
                matTooltip="刪除所有購買項目"
                (click)="clearPurchases()"
              >
                <mat-icon>delete_sweep</mat-icon>
              </button>
            </div>
          </div>
          <div
            fxLayout="row wrap"
            fxLayoutAlign="start start"
            fxLayoutGap="10px"
          >
            <div
              *ngFor="let pr of purchaseRelations"
              [attr.object-id]="pr.objectId"
            >
              <the-thing-thumbnail
                [id]="pr.objectId"
                size="small"
              ></the-thing-thumbnail>
            </div>
          </div>
          <div fxLayout="row" fxLayoutAlign="end end">
            <h4 class="total-charge">
              總價：<ygg-price [price]="totalCharge"></ygg-price>
            </h4>
          </div>
        </div>
        <br />
        <div class="schedule" *ngIf="eventIds && eventIds.length > 0">
          <h2>行程表</h2>
          <div fxLayout="row" fxLayoutAlign="start stretch" fxLayoutGap="50px">
            <ng-container *ngFor="let eventId of eventIds">
              <the-thing-thumbnail
                class="event"
                [id]="eventId"
                [imitation]="ImitationEvent"
              ></the-thing-thumbnail>
              <mat-divider [vertical]="true"></mat-divider>
            </ng-container>
          </div>
        </div>
      </div>
      <div the-thing-projection-footer>
      </div>
    </the-thing>
  </div>
</div>
